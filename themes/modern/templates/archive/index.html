{% extends "subscriber_facing/base.html" %}
{% load fqdn %}
{% load localize %}
{% load mutable_url %}
{% load tz %}
{% load i18n %}
{% block extra_head %}
    {% include "subscriber_facing/snippets/metadata/archive.html" %}
{% endblock extra_head %}
{% block content %}
    <div class="email-list">
        {% for email in public_emails %}
            <a href="{{ email.get_absolute_url }}" class="email-link">
                <div class="email {% if email.featured %}featured{% endif %}">
                    <div class="email-image">
                        {% if email.image %}
                            <img src="{{ email.image }}"
                                 alt="{{ email.subject }}"
                                 width="100%"
                                 height="100%" />
                        {% else %}
                            <div class="email-image-placeholder"></div>
                        {% endif %}
                    </div>
                    <div class="email-header">
                        <div class="email-title">{{ email.subject }}</div>
                        <div class="email-metadata">
                            {% if email.is_premium %}
                                {% localized 'web.post.label.premium' newsletter.locale %} Â·
                            {% endif %}
                            {% localtime on %}
                            {% language newsletter.locale %}
                                {{ email.publish_date|timezone:newsletter.timezone|date:"F j, Y" }}
                            {% endlanguage %}
                        {% endlocaltime %}
                        {% if email.featured %}
                            {% include "subscriber_facing/svg/pin.svg" %}
                        {% endif %}
                    </div>
                </div>
                <div class="email-description">{{ email.rendered_short_description }}</div>
            </div>
        </a>
        <hr />
    {% empty %}
        <div class="empty-state">
            <div class="empty-state-message">
                <div>{% localized "web.message.empty.no_emails_published" newsletter.locale %}</div>
                {% if not subscriber %}
                    {% include "subscriber_facing/snippets/subscribe_form.html" %}
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>
{% include "subscriber_facing/snippets/pagination.html" with public_emails=public_emails newsletter=newsletter %}
{% endblock content %}
